# Traefik Static Configuration
# This is the main Traefik configuration file for ImageTools deployment
# https://doc.traefik.io/traefik/

# API and Dashboard
api:
  dashboard: true
  insecure: false  # Dashboard requires authentication

# Entry Points (ports that Traefik listens on)
entryPoints:
  web:
    address: ":80"
    # Optional: Redirect HTTP to HTTPS
    # http:
    #   redirections:
    #     entryPoint:
    #       to: websecure
    #       scheme: https
  
  # HTTPS entry point (uncomment for production)
  # websecure:
  #   address: ":443"
  #   http:
  #     tls:
  #       certResolver: letsencrypt

# Certificate Resolvers (for automatic HTTPS)
# certificatesResolvers:
#   letsencrypt:
#     acme:
#       email: your-email@example.com
#       storage: /letsencrypt/acme.json
#       httpChallenge:
#         entryPoint: web

# Providers
providers:
  # File provider for dynamic configuration
  file:
    directory: /etc/traefik/config
    watch: true
  
  # Docker provider (for label-based configuration)
  docker:
    endpoint: "unix:///var/run/docker.sock"
    exposedByDefault: false  # Only expose containers with traefik.enable=true
    network: imagetools-network

# Logging
log:
  level: INFO
  # format: json  # Uncomment for structured logging

# Access Logs
accessLog:
  # filePath: /var/log/traefik/access.log
  bufferingSize: 100

# Metrics (optional - uncomment to enable)
# metrics:
#   prometheus:
#     entryPoint: metrics
#     addEntryPointsLabels: true
#     addServicesLabels: true
